{% assign item = include.item %}

<div class="d-none d-md-block border-bottom border-gray px-3 py-2">
  <!-- Title line -->
  <h5 class="mb-1 font-weight-normal">{{ item.title }}</h5>

  <!-- Authors · Journal · Year · Links line -->
  <div class="d-flex flex-wrap align-items-center small text-truncate">

    <!-- Authors, Journal, Year -->
    <div class="flex-grow-1">
      {% assign formatted_authors = "" %}
      {% for a in item.authors %}
        {% if a == "Yang Wang" %}
          {% assign formatted_authors = formatted_authors | append: "<strong>Yang Wang</strong>" %}
        {% else %}
          {% assign formatted_authors = formatted_authors | append: a %}
        {% endif %}
        {% unless forloop.last %}
          {% assign formatted_authors = formatted_authors | append: ", " %}
        {% endunless %}
      {% endfor %}
      <span>{{ formatted_authors | raw }}</span>

      {% if item.pub %}
        <span class="text-muted mx-1">·</span><em>{{ item.pub }}</em>
      {% endif %}

      {% if item.date %}
        <span class="text-muted mx-1">·</span>{{ item.date | date: "%Y" }}
      {% endif %}
    </div>

    <!-- Links -->
    {% if item.links %}
      <div class="ml-3 text-nowrap">
        {% for link in item.links %}
          {% assign label = link[0] %}
          {% assign url = link[1] %}
          <a class="btn btn-sm btn-outline-primary ml-1"
             href="{% if url.url %}{{ url.url }}{% else %}{{ url }}{% endif %}"
             target="{% if url.target %}{{ url.target }}{% else %}_blank{% endif %}">
            {{ label }}
          </a>
        {% endfor %}
      </div>
    {% endif %}

  </div>
</div>

<!-- Mobile version -->
<div class="d-md-none border-bottom border-gray px-2 py-2">
  <h5 class="mb-1 font-weight-normal">{{ item.title }}</h5>
  <div class="small">
    {% assign formatted_authors = "" %}
    {% for a in item.authors %}
      {% if a == "Yang Wang" %}
        {% assign formatted_authors = formatted_authors | append: "<strong>Yang Wang</strong>" %}
      {% else %}
        {% assign formatted_authors = formatted_authors | append: a %}
      {% endif %}
      {% unless forloop.last %}
        {% assign formatted_authors = formatted_authors | append: ", " %}
      {% endunless %}
    {% endfor %}
    <span>{{ formatted_authors | raw }}</span>

    {% if item.pub %}
      <span class="text-muted mx-1">·</span><em>{{ item.pub }}</em>
    {% endif %}

    {% if item.date %}
      <span class="text-muted mx-1">·</span>{{ item.date | date: "%Y" }}
    {% endif %}

    {% if item.links %}
      <div class="mt-1">
        {% for link in item.links %}
          {% assign label = link[0] %}
          {% assign url = link[1] %}
          <a class="btn btn-sm btn-outline-primary ml-1 mb-1"
             href="{% if url.url %}{{ url.url }}{% else %}{{ url }}{% endif %}"
             target="{% if url.target %}{{ url.target }}{% else %}_blank{% endif %}">
            {{ label }}
          </a>
        {% endfor %}
      </div>
    {% endif %}
  </div>
</div>
