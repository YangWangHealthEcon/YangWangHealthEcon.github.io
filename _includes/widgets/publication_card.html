{% assign publications = include.publications %}

<div class="my-3 p-0 bg-white shadow-sm rounded-sm">
  <h6 class="border-bottom border-gray p-3 mb-0">
    {% if include.title %}
      {{ include.title }}
    {% else %}
      <i class="fas fa-star"></i> Selected Publications
    {% endif %}
    <a href="{{ 'publications' | relative_url }}" class="float-right">(view all <i class="fas fa-angle-double-right"></i>)</a>
  </h6>

  {% for item in publications limit:include.limit %}
    <div class="border-bottom border-gray px-3 py-2">
      <div class="d-flex flex-wrap align-items-center">

        <!-- MAIN TEXT: Authors 路 Journal 路 Year -->
        <div class="flex-grow-1 small text-truncate">
          {% if item.authors %}
            {% capture formatted_authors %}
              {% for a in item.authors %}
                {% if a == "Yang Wang" %}
                  <strong>Yang Wang</strong>
                {% else %}
                  {{ a }}
                {% endif %}
                {% unless forloop.last %}, {% endunless %}
              {% endfor %}
            {% endcapture %}
            <span>{{ formatted_authors | strip }}</span>
          {% endif %}

          {% if item.pub %}
            <span class="text-muted mx-1">路</span><em>{{ item.pub }}</em>
          {% endif %}

          {% if item.date %}
            <span class="text-muted mx-1">路</span>{{ item.date | date: "%Y" }}
          {% endif %}
        </div>

        <!-- LINKS -->
        {% if item.links %}
          <div class="ml-3 text-nowrap">
            {% for link in item.links %}
              {% assign label = link[0] %}
              {% assign url = link[1] %}
              <a class="btn btn-sm btn-outline-primary ml-1"
                 href="{% if url.url %}{{ url.url }}{% else %}{{ url }}{% endif %}"
                 target="{% if url.target %}{{ url.target }}{% else %}_blank{% endif %}">
                {{ label }}
              </a>
            {% endfor %}
          </div>
        {% endif %}

      </div>
    </div>
  {% endfor %}

  <h6 class="d-block p-3 mt-0 text-right">
    <a href="{{ 'publications' | relative_url }}">All publications <i class="fas fa-angle-double-right"></i></a>
  </h6>
</div>
